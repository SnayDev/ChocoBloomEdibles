<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ChocoBloom</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500&display=swap" rel="stylesheet">
  <style>
    .slider-effects-section {
      margin: 34px auto 0 auto;
      max-width: 390px;
      background: #170022;
      border-radius: 18px;
      box-shadow: 0 0 18px #ff00cc22;
      padding: 24px 22px 16px 22px;
      text-align: center;
    }
    .slider-effects-section label {
      font-weight: 500;
      color: #fff;
      font-size: 1.12em;
      display: block;
      margin-bottom: 10px;
      letter-spacing: 0.05em;
    }
    .slider-effects-section input[type="range"] {
      width: 100%;
      margin: 12px 0 2px 0;
      accent-color: #ff00cc;
      height: 3.5px;
      border-radius: 4px;
      background: linear-gradient(90deg,#ff00cc,#ff3399 80%);
    }
    .slider-effects-section .slider-value-label {
      font-size: 1.13em;
      font-weight: 600;
      color: #ff00cc;
      margin-top: 2px;
      display: block;
    }
    .slider-effects-section .slider-effect-text {
      margin-top: 8px;
      font-size: 0.98em;
      color: #fff;
      font-weight: 500;
      min-height: 24px;
    }
  </style>
</head>
<body>
  <div class="hamburger" onclick="toggleMenu()" aria-label="Menu" tabindex="0">
    <div></div><div></div><div></div>
  </div>
  <header class="navbar">
    <nav class="navbar-inner">
      <div class="navbar-logo-center">
        <a href="index.html">
          <img src="img/mascotte.png" alt="Mascotte navbar" />
        </a>
      </div>
      <ul class="navbar-menu">
        <li><a href="prodotti.html">PRODOTTI</a></li>
        <li><a href="#about">VISIONE</a></li>
        <li><a href="#timeline">STORIA</a></li>
        <li><a href="#footer">CONTATTI</a></li>
      </ul>
    </nav>
    <nav class="side-menu" id="sideMenu">
      <ul>
        <li><a href="prodotti.html">PRODOTTI</a></li>
        <li><a href="#about">VISIONE</a></li>
        <li><a href="#timeline">STORIA</a></li>
        <li><a href="#footer">CONTATTI</a></li>
      </ul>
    </nav>
  </header>
  <section class="hero">
    <div class="hero-content">
      <h1 class="chocobloom-glow">CHOCOBLOOM</h1>
      <div class="hero-desc">
        Premium Edibles. 1000mg. Made to elevate.<br>
        Scopri la nuova esperienza ChocoBloom: cioccolato artigianale & cannabis californiana.
      </div>
      <a href="prodotti.html" class="cta glowing">SCOPRI I PRODOTTI</a>
      <div class="bloom-animation"></div>
    </div>
  </section>
  <section class="social-proof">
    <span class="badge-live">ðŸ”´ <span>LIVE</span>: Prendiamo nuovi ordini oggi Â· Nuovo drop tra <span id="countdown">03:12:36</span></span>
  </section>
  <section class="dose-section fadein">
    <h2>Calcola la tua dose ideale</h2>
    <form id="dose-calc-form" class="dose-calc-advanced">
      <label for="dose-product">Prodotto:</label>
      <select id="dose-product" name="product" required>
        <option value="classico">ChocoBloom Classico 1000mg</option>
        <option value="syrup">ChocoBloom Syrup 1000mg</option>
      </select>
      <label for="dose-sex">Sesso:</label>
      <select id="dose-sex" name="sex" required>
        <option value="m">Maschio</option>
        <option value="f">Femmina</option>
        <option value="x">Altro</option>
      </select>
      <label for="dose-weight">Peso (kg):</label>
      <input type="number" id="dose-weight" name="weight" min="35" max="180" required>
      <label for="dose-tolerance">Consumo THC:</label>
      <select id="dose-tolerance" name="tolerance" required>
        <option value="none">Mai provato</option>
        <option value="low">Saltuario</option>
        <option value="med">Regolare</option>
        <option value="high">Alta tolleranza</option>
      </select>
      <button type="submit" class="cta">Calcola dose</button>
    </form>
    <div id="dose-calc-result" class="dose-calc-result"></div>
    <div class="slider-effects-section" id="slider-effects-section" style="display:none;">
      <label for="slider-dose">Simula una dose diversa:</label>
      <input type="range" id="slider-dose" min="5" max="1000" step="5" value="50">
      <span class="slider-value-label"><span id="slider-dose-value">50</span>mg THC</span>
      <div class="slider-effect-text" id="slider-effect-text"></div>
    </div>
    <div class="dose-calc-safety">
      <small>
        Attenzione: i risultati sono solo indicativi. Inizia sempre con la dose minima possibile. Gli effetti possono durare anche 8 ore.<br>
        <b>Mai guidare o svolgere attivitÃ  a rischio dopo lâ€™assunzione.</b>
      </small>
    </div>
  </section>
  <section class="timeline-section fadein" id="timeline">
    <h2>La Storia di ChocoBloom</h2>
    <div class="timeline">
      <div class="timeline-step">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <h3>Origine</h3>
          <p>Dalla pianta al chicco: selezioniamo solo cacao sudamericano e distillati californiani certificati.</p>
        </div>
      </div>
      <div class="timeline-step">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <h3>Alchimia</h3>
          <p>La magia artigianale italiana incontra la precisione della cannabis moderna: nasce ChocoBloom.</p>
        </div>
      </div>
      <div class="timeline-step">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <h3>Esperienza</h3>
          <p>Un viaggio sensoriale unico, dosato al milligrammo. Dedicato a chi sa scegliere.</p>
        </div>
      </div>
    </div>
  </section>
  <section class="ingredienti-section fadein">
    <h2>Ingredienti Scelti & Certificazioni</h2>
    <div class="ingredienti-list">
      <div class="ingrediente">
        <img src="img/cacao.png" alt="Cacao premium">
        <span>Cacao Criollo BIO</span>
      </div>
      <div class="ingrediente">
        <img src="img/distillato.png" alt="Distillato D9">
        <span>Distillato D9 Californiano</span>
      </div>
      <div class="ingrediente">
        <img src="img/vaniglia.png" alt="Vaniglia naturale">
        <span>Vaniglia Bourbon Naturale</span>
      </div>
      <div class="badge-cert">
        <img src="img/badge-lab.png" alt="Lab tested">
        <span>Lab Tested</span>
      </div>
      <div class="badge-cert">
        <img src="img/badge-bio.png" alt="Biologico">
        <span>Biologico</span>
      </div>
    </div>
  </section>
  <section class="faq-section fadein">
    <h2>FAQ</h2>
    <div class="faq-list">
      <div class="faq-item">
        <button class="faq-q">Come vengono prodotti?</button>
        <div class="faq-a">Ogni cioccolatino Ã¨ artigianale, con ingredienti selezionati e distillato testato in laboratorio.</div>
      </div>
      <div class="faq-item">
        <button class="faq-q">Quanto dura lâ€™effetto?</button>
        <div class="faq-a">Lâ€™effetto dura tra 4 e 8 ore, dipende dalla tolleranza personale e dalla dose scelta.</div>
      </div>
      <div class="faq-item">
        <button class="faq-q">Ãˆ legale in Italia?</button>
        <div class="faq-a">ChocoBloom Ã¨ un marchio registrato in California, e prodotto esclusivamente nello stesso stato, negli USA.<br>
        ChocoBloom Ã¨ venduto solo dove consentito dalla legge. Verifica sempre la normativa locale.</div>
      </div>
    </div>
  </section>
  <footer class="footer" id="footer">
    <div>
      <a href="https://t.me/ChocoBloomEdibles_Order" target="_blank">Telegram</a>
      <span>Â·</span>
      <a href="https://instagram.com/chocobloomedibles" target="_blank">Instagram</a>
    </div>
    <div class="footer-copy">
      Â© 2025 ChocoBloom. Prodotto in California â€“ Ideato in Italia.
    </div>
    <div class="footer-accessibility">
      <small>AccessibilitÃ : testo ad alto contrasto, navigazione da tastiera, immagini con alt, audio descritto. Sito ottimizzato per mobile e desktop.</small>
    </div>
  </footer>
  <script>
    function toggleMenu() {
      var menu = document.getElementById("sideMenu");
      menu.classList.toggle("show");
    }
    document.querySelectorAll('.faq-q').forEach(btn => {
      btn.onclick = function() {
        this.classList.toggle("open");
        var ans = this.nextElementSibling;
        ans.style.display = ans.style.display === "block" ? "none" : "block";
      }
    });

    function calculateDose(weight, sex, tolerance) {
      let dose = weight * 0.2;
      if(sex === 'f') dose *= 0.85;
      if(sex === 'x') dose *= 0.93;
      if(tolerance === 'none') dose *= 0.5;
      else if(tolerance === 'low') dose *= 0.75;
      else if(tolerance === 'med') dose *= 1;
      else if(tolerance === 'high') dose *= 2;
      dose = Math.round(dose);
      if (dose < 5) dose = 5;
      if (dose > 1000) dose = 1000;
      return dose;
    }

    function getCioccolatiniString(doseMg) {
      const mgPerPz = 200;
      const gPerPz = 10;
      let cioc = doseMg / mgPerPz;
      let ciocTxt = (cioc < 1) ? `${Math.round(cioc * 10) / 10}` : `${Math.floor(cioc)}`;
      let gr = Math.round((doseMg / mgPerPz) * gPerPz * 10) / 10;
      if (cioc < 1) {
        return `â‰ˆ ${Math.round(cioc*2)/2} cioccolatino (${gr}g di cioccolato)`;
      } else {
        return `${ciocTxt} cioccolatino/i (${gr}g di cioccolato)`;
      }
    }

    function getSyrupString(doseMg) {
      let mgPerMl = 1000/150;
      let ml = Math.round((doseMg/mgPerMl)*10)/10;
      return `â‰ˆ ${ml}ml di syrup`;
    }

    function getEffectPhrase(dose) {
      if (dose < 10) return "Effetti molto leggeri, percepibili solo per principianti.";
      if (dose < 20) return "Effetti leggerissimi, adatti a chi non ha mai consumato THC.";
      if (dose < 35) return "Effetti moderati, rilassanti e gestibili per la maggior parte delle persone.";
      if (dose < 60) return "Effetti forti: sconsigliato per principianti. Possibili alterazioni importanti della percezione.";
      if (dose < 100) return "Dose molto elevata: effetti molto forti, lunga durata, rischio di discomfort. Massima cautela!";
      return "Dose estremamente alta: rischio di effetti indesiderati, paranoia, nausea. Solo per utenti con altissima tolleranza. Evitare se inesperti!";
    }

    document.getElementById('dose-calc-form').addEventListener('submit', function(e){
      e.preventDefault();
      const weight = parseFloat(this.weight.value);
      const sex = this.sex.value;
      const tolerance = this.tolerance.value;
      const product = this.product.value;
      const dose = calculateDose(weight, sex, tolerance);
      let resultText = `<b>Dose consigliata:</b> ${dose}mg THC<br>`;
      if(product === "classico") {
        resultText += `<span>${getCioccolatiniString(dose)}</span>`;
      } else if(product === "syrup") {
        resultText += `<span>${getSyrupString(dose)}</span>`;
      }
      if (dose >= 40 && dose < 80) {
        resultText += `<div style="color:#ffcf00;margin-top:7px;font-size:0.93em;">Dose elevata: effetti forti, procedi con cautela.</div>`;
      }
      if (dose >= 80) {
        resultText += `<div style="color:#ff3333;margin-top:7px;font-size:0.98em;font-weight:600;">Dose MOLTO elevata: rischio di effetti indesiderati, solo per utenti molto esperti!</div>`;
      }
      document.getElementById('dose-calc-result').innerHTML = resultText;

      // Slider parte dal valore calcolato
      var sliderSection = document.getElementById("slider-effects-section");
      var slider = document.getElementById("slider-dose");
      var valueLabel = document.getElementById("slider-dose-value");
      var effectText = document.getElementById("slider-effect-text");
      slider.value = dose;
      valueLabel.textContent = dose;
      effectText.textContent = getEffectPhrase(dose);
      sliderSection.style.display = "block";
    });

    document.getElementById("slider-dose").addEventListener("input", function() {
      var dose = parseInt(this.value);
      document.getElementById("slider-dose-value").textContent = dose;
      document.getElementById("slider-effect-text").textContent = getEffectPhrase(dose);
    });
  </script>
</body>
</html>
