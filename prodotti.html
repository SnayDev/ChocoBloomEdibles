<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prodotti | ChocoBloom</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500&display=swap" rel="stylesheet">
</head>
<body>
  <div class="hamburger" onclick="toggleMenu()" aria-label="Menu" tabindex="0">
    <div></div><div></div><div></div>
  </div>
  <header class="navbar">
    <nav class="navbar-inner">
      <div class="navbar-logo-center">
        <a href="index.html">
          <img src="img/mascotte.png" alt="Mascotte navbar" />
        </a>
      </div>
      <ul class="navbar-menu">
        <li><a href="prodotti.html">PRODOTTI</a></li>
        <li><a href="index.html#about">VISIONE</a></li>
        <li><a href="index.html#timeline">STORIA</a></li>
        <li><a href="index.html#footer">CONTATTI</a></li>
      </ul>
    </nav>
    <nav class="side-menu" id="sideMenu">
      <ul>
        <li><a href="prodotti.html">PRODOTTI</a></li>
        <li><a href="index.html#about">VISIONE</a></li>
        <li><a href="index.html#timeline">STORIA</a></li>
        <li><a href="index.html#footer">CONTATTI</a></li>
      </ul>
    </nav>
  </header>
  <main>
    <section class="products-section fadein" id="products-section">
      <h2>I Nostri Edibles</h2>
      <div class="products-grid">
        <div class="product-card" data-product="classico" tabindex="0">
          <img src="img/prodotto_classico.png" alt="ChocoBloom Classico 1000mg" />
          <div class="product-info">
            <h3>ChocoBloom Classico 1000mg</h3>
            <p>5 pezzi · 200mg THC per pezzo · 10g cad.</p>
            <a href="classico.html" class="discover-btn">Scopri di più</a>
          </div>
        </div>
        <div class="product-card" data-product="syrup" tabindex="0">
          <img src="img/prodotto_syrup.png" alt="ChocoBloom Syrup 1000mg" />
          <div class="product-info">
            <h3>ChocoBloom Syrup 1000mg</h3>
            <p>Flacone da 150ml · 1000mg THC totali (~6.7mg/ml)</p>
            <a href="syrup.html" class="discover-btn">Scopri di più</a>
          </div>
        </div>
      </div>
    </section>
    <section class="dose-section fadein">
      <h2>Calcola la tua dose ideale</h2>
      <form id="dose-calc-form-prodotti" class="dose-calc-advanced">
        <label for="dose-product">Prodotto:</label>
        <select id="dose-product" name="product" required>
          <option value="classico">ChocoBloom Classico 1000mg</option>
          <option value="syrup">ChocoBloom Syrup 1000mg</option>
        </select>
        <label for="dose-sex">Sesso:</label>
        <select id="dose-sex" name="sex" required>
          <option value="m">Maschio</option>
          <option value="f">Femmina</option>
          <option value="x">Altro</option>
        </select>
        <label for="dose-weight">Peso (kg):</label>
        <input type="number" id="dose-weight" name="weight" min="35" max="180" required>
        <label for="dose-tolerance">Consumo THC:</label>
        <select id="dose-tolerance" name="tolerance" required>
          <option value="none">Mai provato</option>
          <option value="low">Saltuario</option>
          <option value="med">Regolare</option>
          <option value="high">Alta tolleranza</option>
        </select>
        <button type="submit" class="cta">Calcola dose</button>
      </form>
      <div id="dose-calc-result-prodotti" class="dose-calc-result"></div>
      <div class="dose-calc-safety">
        <small>
          Attenzione: i risultati sono solo indicativi. Inizia sempre con la dose minima possibile. Gli effetti possono durare anche 8 ore.<br>
          <b>Mai guidare o svolgere attività a rischio dopo l’assunzione.</b>
        </small>
      </div>
    </section>
    <section class="ingredienti-section fadein">
      <h2>Ingredienti Scelti & Certificazioni</h2>
      <div class="ingredienti-list">
        <div class="ingrediente">
          <img src="img/cacao.png" alt="Cacao premium">
          <span>Cacao Criollo BIO</span>
        </div>
        <div class="ingrediente">
          <img src="img/distillato.png" alt="Distillato D9">
          <span>Distillato D9 Californiano</span>
        </div>
        <div class="ingrediente">
          <img src="img/vaniglia.png" alt="Vaniglia naturale">
          <span>Vaniglia Bourbon Naturale</span>
        </div>
        <div class="badge-cert">
          <img src="img/badge-lab.png" alt="Lab tested">
          <span>Lab Tested</span>
        </div>
        <div class="badge-cert">
          <img src="img/badge-bio.png" alt="Biologico">
          <span>Biologico</span>
        </div>
      </div>
    </section>
    <section class="faq-section fadein">
      <h2>FAQ</h2>
      <div class="faq-list">
        <div class="faq-item">
          <button class="faq-q">Come vengono prodotti?</button>
          <div class="faq-a">Ogni cioccolatino è artigianale, con ingredienti selezionati e distillato testato in laboratorio.</div>
        </div>
        <div class="faq-item">
          <button class="faq-q">Quanto dura l’effetto?</button>
          <div class="faq-a">L’effetto dura tra 4 e 8 ore, dipende dalla tolleranza personale e dalla dose scelta.</div>
        </div>
        <div class="faq-item">
          <button class="faq-q">È legale in Italia?</button>
          <div class="faq-a">ChocoBloom è un marchio registrato in California, e prodotto esclusivamente nello stesso stato, negli USA.<br>
            ChocoBloom è venduto solo dove consentito dalla legge. Verifica sempre la normativa locale.
          </div>
        </div>
      </div>
    </section>
  </main>
  <footer class="footer">
    <div>
      <a href="https://t.me/ChocoBloomEdibles_Order" target="_blank">Telegram</a>
      <span>·</span>
      <a href="https://instagram.com/chocobloomedibles" target="_blank">Instagram</a>
    </div>
    <div class="footer-copy">
      © 2025 ChocoBloom. Prodotto in California – Ideato in Italia.
    </div>
    <div class="footer-accessibility">
      <small>Accessibilità: testo ad alto contrasto, navigazione da tastiera, immagini con alt, audio descritto. Sito ottimizzato per mobile e desktop.</small>
    </div>
  </footer>
  <script>
    function toggleMenu() {
      var menu = document.getElementById("sideMenu");
      menu.classList.toggle("show");
    }
    document.querySelectorAll('.product-card').forEach(card => {
      card.addEventListener('click', function(e){
        if(e.target.classList.contains('discover-btn')) return;
        document.querySelectorAll('.product-card').forEach(c=>c.classList.remove('active'));
        this.classList.add('active');
        document.getElementById('products-section').classList.add('fluo-bg');
      });
      card.addEventListener('blur', function(){
        this.classList.remove('active');
        document.getElementById('products-section').classList.remove('fluo-bg');
      });
    });
    document.querySelectorAll('.discover-btn').forEach(btn => {
      btn.onclick = e => { e.stopPropagation(); }
    });
    document.querySelectorAll('.faq-q').forEach(btn => {
      btn.onclick = function() {
        this.classList.toggle("open");
        var ans = this.nextElementSibling;
        ans.style.display = ans.style.display === "block" ? "none" : "block";
      }
    });
    function calculateDose(weight, sex, tolerance) {
      let dose = weight * 0.2;
      if(sex === 'f') dose *= 0.85;
      if(sex === 'x') dose *= 0.93;
      if(tolerance === 'none') dose *= 0.5;
      else if(tolerance === 'low') dose *= 0.75;
      else if(tolerance === 'med') dose *= 1;
      else if(tolerance === 'high') dose *= 2;
      dose = Math.round(dose);
      if (dose < 5) dose = 5;
      if (dose > 1000) dose = 1000;
      return dose;
    }
    function getCioccolatiniString(doseMg) {
      const mgPerPz = 200;
      const gPerPz = 10;
      let cioc = doseMg / mgPerPz;
      let ciocTxt = (cioc < 1) ? `${Math.round(cioc * 10) / 10}` : `${Math.floor(cioc)}`;
      let gr = Math.round((doseMg / mgPerPz) * gPerPz * 10) / 10;
      if (cioc < 1) {
        return `≈ ${Math.round(cioc*2)/2} cioccolatino (${gr}g di cioccolato)`;
      } else {
        return `${ciocTxt} cioccolatino/i (${gr}g di cioccolato)`;
      }
    }
    function getSyrupString(doseMg) {
      let mgPerMl = 1000/150;
      let ml = Math.round((doseMg/mgPerMl)*10)/10;
      return `≈ ${ml}ml di syrup`;
    }
    document.getElementById('dose-calc-form-prodotti').addEventListener('submit', function(e){
      e.preventDefault();
      const weight = parseFloat(this.weight.value);
      const sex = this.sex.value;
      const tolerance = this.tolerance.value;
      const product = this.product.value;
      const dose = calculateDose(weight, sex, tolerance);
      let resultText = `<b>Dose consigliata:</b> ${dose}mg THC<br>`;
      if(product === "classico") {
        resultText += `<span>${getCioccolatiniString(dose)}</span>`;
      } else if(product === "syrup") {
        resultText += `<span>${getSyrupString(dose)}</span>`;
      }
      if (dose >= 40 && dose < 80) {
        resultText += `<div style="color:#ffcf00;margin-top:7px;font-size:0.93em;">Dose elevata: effetti forti, procedi con cautela.</div>`;
      }
      if (dose >= 80) {
        resultText += `<div style="color:#ff3333;margin-top:7px;font-size:0.98em;font-weight:600;">Dose MOLTO elevata: rischio di effetti indesiderati, solo per utenti molto esperti!</div>`;
      }
      document.getElementById('dose-calc-result-prodotti').innerHTML = resultText;
    });
  </script>
</body>
</html>
