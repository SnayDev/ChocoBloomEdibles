<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ChocoBloom Classico | ChocoBloom</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500&display=swap" rel="stylesheet">
  <style>
    .prod-main-block {
      display: flex;
      flex-wrap: wrap;
      gap: 48px;
      align-items: flex-start;
      margin-bottom: 38px;
      background: #14001f;
      border-radius: 22px;
      box-shadow: 0 0 24px #ff00cc33;
      padding: 32px 18px 18px 18px;
      max-width: 980px;
      margin-left: auto;
      margin-right: auto;
    }
    .prod-img {
      flex: 0 0 220px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .prod-img img {
      width: 190px;
      max-width: 50vw;
      border-radius: 18px;
      box-shadow: 0 0 32px #ff00cc55;
      background: #fff;
    }
    .prod-info-block {
      flex: 1 1 260px;
      min-width: 220px;
      display: flex;
      flex-direction: column;
      gap: 18px;
    }
    .prod-info-block h1 {
      margin-top: 0;
      margin-bottom: 9px;
    }
    .prod-info-block ul {
      margin: 0 0 10px 18px;
      padding: 0;
      color: #fff;
      font-size: 1.1em;
    }
    .prod-note {
      margin-top: 12px;
      font-size: 0.98em;
      color: #ff00cc;
      background: #180022;
      padding: 12px 18px;
      border-radius: 14px;
      max-width: 420px;
    }
    .prod-nutri-ingred {
      display: flex;
      gap: 48px;
      margin-top: 16px;
      flex-wrap: wrap;
    }
    .prod-nutri {
      background: #180028;
      border-radius: 12px;
      color: #fff;
      padding: 18px 26px;
      min-width: 180px;
      margin-bottom: 8px;
      flex: 1 1 160px;
      max-width: 290px;
    }
    .prod-nutri h3 {
      color: #ff00cc;
      margin-top: 0;
      font-size: 1.11em;
      letter-spacing: 0.04em;
    }
    .prod-nutri table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.99em;
      margin-bottom: 0;
    }
    .prod-nutri th, .prod-nutri td {
      padding: 4px 5px;
      border-bottom: 1px solid #ff00cc22;
      text-align: left;
    }
    .prod-nutri tr:last-child th, .prod-nutri tr:last-child td {
      border-bottom: none;
    }
    .prod-ingred {
      background: #180028;
      border-radius: 12px;
      color: #fff;
      padding: 18px 22px;
      min-width: 120px;
      flex: 1 1 120px;
      max-width: 260px;
    }
    .prod-ingred h3 {
      color: #ff00cc;
      margin-top: 0;
      font-size: 1.11em;
      letter-spacing: 0.04em;
    }
    .prod-ingred ul {
      margin: 0 0 0 18px;
      padding: 0;
      font-size: 0.97em;
    }
    .slider-effects-section {
      margin: 34px auto 0 auto;
      max-width: 390px;
      background: #170022;
      border-radius: 18px;
      box-shadow: 0 0 18px #ff00cc22;
      padding: 24px 22px 16px 22px;
      text-align: center;
    }
    .slider-effects-section label {
      font-weight: 500;
      color: #fff;
      font-size: 1.12em;
      display: block;
      margin-bottom: 10px;
      letter-spacing: 0.05em;
    }
    .slider-effects-section input[type="range"] {
      width: 100%;
      margin: 12px 0 2px 0;
      accent-color: #ff00cc;
      height: 3.5px;
      border-radius: 4px;
      background: linear-gradient(90deg,#ff00cc,#ff3399 80%);
    }
    .slider-effects-section .slider-value-label {
      font-size: 1.13em;
      font-weight: 600;
      color: #ff00cc;
      margin-top: 2px;
      display: block;
    }
    .slider-effects-section .slider-effect-text {
      margin-top: 8px;
      font-size: 0.98em;
      color: #fff;
      font-weight: 500;
      min-height: 24px;
    }
    @media (max-width: 800px) {
      .prod-main-block, .prod-nutri-ingred { flex-direction: column; gap: 20px; }
      .prod-img img { width: 80vw; max-width: 300px; }
      .prod-nutri, .prod-ingred { max-width: 100vw; }
      .prod-info-block { gap: 8px; }
    }
  </style>
</head>
<body>
  <div class="hamburger" onclick="toggleMenu()" aria-label="Menu" tabindex="0">
    <div></div><div></div><div></div>
  </div>
  <header class="navbar">
    <nav class="navbar-inner">
      <div class="navbar-logo-center">
        <a href="index.html">
          <img src="img/mascotte.png" alt="Mascotte navbar" />
        </a>
      </div>
      <ul class="navbar-menu">
        <li><a href="prodotti.html">PRODOTTI</a></li>
        <li><a href="index.html#about">VISIONE</a></li>
        <li><a href="index.html#timeline">STORIA</a></li>
        <li><a href="index.html#footer">CONTATTI</a></li>
      </ul>
    </nav>
    <nav class="side-menu" id="sideMenu">
      <ul>
        <li><a href="prodotti.html">PRODOTTI</a></li>
        <li><a href="index.html#about">VISIONE</a></li>
        <li><a href="index.html#timeline">STORIA</a></li>
        <li><a href="index.html#footer">CONTATTI</a></li>
      </ul>
    </nav>
  </header>
  <main>
    <section class="product-dedicated fadein">
      <div class="prod-main-block">
        <div class="prod-img">
          <img src="img/prodotto_classico.png" alt="ChocoBloom Classico 1000mg" />
        </div>
        <div class="prod-info-block">
          <h1 class="chocobloom-glow">CHOCOBLOOM CLASSICO</h1>
          <ul>
            <li>5 pezzi per confezione</li>
            <li>200mg THC per pezzo</li>
            <li>10g cioccolato artigianale a pezzo</li>
            <li>Distillato D9 Californiano</li>
            <li>Cacao Criollo BIO</li>
          </ul>
          <div class="prod-note">
            <b>Premium Edibles. 1000mg. Made to elevate.</b><br>
            Un viaggio sensoriale unico, dosato al milligrammo.
          </div>
          <div class="prod-nutri-ingred">
            <div class="prod-nutri">
              <h3>Valori Nutrizionali (per pezzo 10g)</h3>
              <table>
                <tr><th>Energia</th><td>54 kcal</td></tr>
                <tr><th>Grassi</th><td>3.4 g</td></tr>
                <tr><th>di cui saturi</th><td>2.1 g</td></tr>
                <tr><th>Carboidrati</th><td>5.2 g</td></tr>
                <tr><th>di cui zuccheri</th><td>4.5 g</td></tr>
                <tr><th>Proteine</th><td>0.8 g</td></tr>
                <tr><th>Sale</th><td>0.01 g</td></tr>
              </table>
            </div>
            <div class="prod-ingred">
              <h3>Ingredienti</h3>
              <ul>
                <li>Cacao Criollo biologico</li>
                <li>Zucchero di canna bio</li>
                <li>Distillato D9 THC californiano</li>
                <li>Burro di cacao bio</li>
                <li>Vaniglia Bourbon naturale</li>
                <li>Lecitina di soia</li>
              </ul>
              <div style="font-size:0.94em;opacity:0.74;margin-top:7px;">
                <b>Allergeni:</b> soia. Può contenere tracce di latte e frutta a guscio.
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CALCOLATORE AVANZATO + SLIDER EFFETTI -->
    <section class="dose-section fadein">
      <h2>Calcola la tua dose ideale</h2>
      <form id="dose-calc-form-classico" class="dose-calc-advanced">
        <label for="dose-weight">Peso (kg):</label>
        <input type="number" id="dose-weight" name="weight" min="35" max="180" required>
        <label for="dose-sex">Sesso:</label>
        <select id="dose-sex" name="sex" required>
          <option value="m">Maschio</option>
          <option value="f">Femmina</option>
          <option value="x">Altro</option>
        </select>
        <label for="dose-tolerance">Consumo THC:</label>
        <select id="dose-tolerance" name="tolerance" required>
          <option value="none">Mai provato</option>
          <option value="low">Saltuario</option>
          <option value="med">Regolare</option>
          <option value="high">Alta tolleranza</option>
        </select>
        <button type="submit" class="cta">Calcola dose</button>
      </form>
      <div id="dose-calc-result-classico" class="dose-calc-result"></div>
      <div class="slider-effects-section" id="slider-effects-section" style="display:none;">
        <label for="slider-dose">Simula una dose diversa:</label>
        <input type="range" id="slider-dose" min="5" max="1000" step="5" value="50">
        <span class="slider-value-label"><span id="slider-dose-value">50</span>mg THC</span>
        <div class="slider-effect-text" id="slider-effect-text"></div>
      </div>
      <div class="dose-calc-safety">
        <small>
          Attenzione: i risultati sono solo indicativi. Inizia sempre con la dose minima possibile. Gli effetti possono durare anche 8 ore.<br>
          <b>Mai guidare o svolgere attività a rischio dopo l’assunzione.</b>
        </small>
      </div>
    </section>
  </main>
  <footer class="footer">
    <div>
      <a href="https://t.me/ChocoBloomEdibles_Order" target="_blank">Telegram</a>
      <span>·</span>
      <a href="https://instagram.com/chocobloomedibles" target="_blank">Instagram</a>
    </div>
    <div class="footer-copy">
      © 2025 ChocoBloom. Prodotto in California – Ideato in Italia.
    </div>
    <div class="footer-accessibility">
      <small>Accessibilità: testo ad alto contrasto, navigazione da tastiera, immagini con alt, audio descritto. Sito ottimizzato per mobile e desktop.</small>
    </div>
  </footer>
  <script>
    function toggleMenu() {
      var menu = document.getElementById("sideMenu");
      menu.classList.toggle("show");
    }

    // Dose calculator con logica corretta
    function calculateDose(weight, sex, tolerance) {
      let dose = weight * 0.2;
      if(sex === 'f') dose *= 0.85;
      if(sex === 'x') dose *= 0.93;
      if(tolerance === 'none') dose *= 0.5;
      else if(tolerance === 'low') dose *= 0.75;
      else if(tolerance === 'med') dose *= 1;
      else if(tolerance === 'high') dose *= 2;
      dose = Math.round(dose);
      if (dose < 5) dose = 5;
      if (dose > 1000) dose = 1000;
      return dose;
    }

    function getCioccolatiniString(doseMg) {
      const mgPerPz = 200;
      const gPerPz = 10;
      let cioc = doseMg / mgPerPz;
      let ciocTxt = (cioc < 1) ? `${Math.round(cioc * 10) / 10}` : `${Math.floor(cioc)}`;
      let gr = Math.round((doseMg / mgPerPz) * gPerPz * 10) / 10;
      if (cioc < 1) {
        return `≈ ${Math.round(cioc*2)/2} cioccolatino (${gr}g di cioccolato)`;
      } else {
        return `${ciocTxt} cioccolatino/i (${gr}g di cioccolato)`;
      }
    }

    function getEffectPhrase(dose) {
      if (dose < 10) return "Effetti molto leggeri, percepibili solo per principianti.";
      if (dose < 20) return "Effetti leggerissimi, adatti a chi non ha mai consumato THC.";
      if (dose < 35) return "Effetti moderati, rilassanti e gestibili per la maggior parte delle persone.";
      if (dose < 60) return "Effetti forti: sconsigliato per principianti. Possibili alterazioni importanti della percezione.";
      if (dose < 100) return "Dose molto elevata: effetti molto forti, lunga durata, rischio di discomfort. Massima cautela!";
      return "Dose estremamente alta: rischio di effetti indesiderati, paranoia, nausea. Solo per utenti con altissima tolleranza. Evitare se inesperti!";
    }

    document.getElementById('dose-calc-form-classico').addEventListener('submit', function(e){
      e.preventDefault();
      const weight = parseFloat(this.weight.value);
      const sex = this.sex.value;
      const tolerance = this.tolerance.value;
      const dose = calculateDose(weight, sex, tolerance);
      let resultText = `<b>Dose consigliata:</b> ${dose}mg THC<br>`;
      resultText += `<span>${getCioccolatiniString(dose)}</span>`;
      if (dose >= 40 && dose < 80) {
        resultText += `<div style="color:#ffcf00;margin-top:7px;font-size:0.93em;">Dose elevata: effetti forti, procedi con cautela.</div>`;
      }
      if (dose >= 80) {
        resultText += `<div style="color:#ff3333;margin-top:7px;font-size:0.98em;font-weight:600;">Dose MOLTO elevata: rischio di effetti indesiderati, solo per utenti molto esperti!</div>`;
      }
      document.getElementById('dose-calc-result-classico').innerHTML = resultText;

      // Slider parte dal valore calcolato
      var sliderSection = document.getElementById("slider-effects-section");
      var slider = document.getElementById("slider-dose");
      var valueLabel = document.getElementById("slider-dose-value");
      var effectText = document.getElementById("slider-effect-text");
      slider.value = dose;
      valueLabel.textContent = dose;
      effectText.textContent = getEffectPhrase(dose);
      sliderSection.style.display = "block";
    });

    // Slider effetti dinamici
    document.getElementById("slider-dose").addEventListener("input", function() {
      var dose = parseInt(this.value);
      document.getElementById("slider-dose-value").textContent = dose;
      document.getElementById("slider-effect-text").textContent = getEffectPhrase(dose);
    });
  </script>
</body>
</html>
