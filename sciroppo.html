<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prodotti | ChocoBloom</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500&display=swap" rel="stylesheet">
  <link href="https://cdn.materialdesignicons.com/7.4.47/css/materialdesignicons.min.css" rel="stylesheet">
</head>
<body>
  <!-- Hamburger menu -->
  <div class="hamburger" onclick="toggleMenu()" aria-label="Menu" tabindex="0">
    <div></div><div></div><div></div>
  </div>
  <header class="navbar">
    <nav class="navbar-inner">
      <div class="navbar-logo-center">
        <a href="index.html">
          <img src="img/mascotte.png" alt="Mascotte navbar" />
        </a>
      </div>
      <ul class="navbar-menu">
        <li><a href="prodotti.html"><i class="mdi mdi-cube-outline"></i> PRODOTTI</a></li>
        <li><a href="index.html#about"><i class="mdi mdi-eye-outline"></i> VISIONE</a></li>
        <li><a href="index.html#timeline"><i class="mdi mdi-history"></i> STORIA</a></li>
        <li><a href="index.html#footer"><i class="mdi mdi-email-outline"></i> CONTATTI</a></li>
      </ul>
    </nav>
    <nav class="side-menu" id="sideMenu">
      <ul>
        <li><a href="prodotti.html"><i class="mdi mdi-cube-outline"></i> PRODOTTI</a></li>
        <li><a href="index.html#about"><i class="mdi mdi-eye-outline"></i> VISIONE</a></li>
        <li><a href="index.html#timeline"><i class="mdi mdi-history"></i> STORIA</a></li>
        <li><a href="index.html#footer"><i class="mdi mdi-email-outline"></i> CONTATTI</a></li>
      </ul>
    </nav>
  </header>

  <main style="padding-top: 100px;">
    <section class="hero-classico">
      <div class="hero-bg-overlay"></div>
      <div class="hero-content" style="text-align: center;">
        <h1 class="hero-title">Scopri il Syrup</h1>
        <p class="hero-subtitle">1000mg di eleganza infusa ‚Äì Ogni goccia, un viaggio</p>
        <p class="hero-promo">‚öóÔ∏è Infuso con distillato D9 californiano lab tested. Non √® uno sciroppo qualunque.</p>
        <a href="#dose-calc-form-classico" class="cta hero-cta">Calcola la tua dose</a>
      </div>
    </section>
    <section class="prodotto-main">
      <div class="prodotto-img">
        <img src="img/sciroppo.png" alt="ChocoBloom Syrup" class="syrup-image" />
      </div>
      <div class="prodotto-info" style="padding-left: 30px;">
        <h1 class="prodotto-titolo">ChocoBloom Syrup 1000mg <span class="badge-esclusivo">Edizione Limitata</span></h1>
        <p class="prodotto-breve">L‚Äôinfuso perfetto per mixare, microdosare o lasciarsi andare. 1000mg di THC, made in California</p>
        <div class="prodotto-caratteristiche">
          <h2>Caratteristiche</h2>
          <ul>
            <li>ü´ó Peso netto: 150mL</li>
            <li>ü´ó THC: 6,6mg per mL</li>
            <li>ü´ó Pezzi per confezione: 1</li>
            <li>ü´ó Tipologia: Sciroppo</li>
          </ul>
        </div>
        <div class="prodotto-nutrizionali">
          <h2>Valori nutrizionali (per 10 mL)</h2>
          <table>
            <tr><td>Energia</td><td>28 kcal</td></tr>
            <tr><td>Grassi</td><td>0 g</td></tr>
            <tr><td>Carboidrati</td><td>7.2 g (di cui zuccheri 6.4 g)</td></tr>
            <tr><td>Proteine</td><td>0 g</td></tr>
            <tr><td>Sale</td><td>0 g</td></tr>
            <tr><td>THC</td><td>66mg</td></tr>
          </table>
        </div>
        <div class="prodotto-ingredienti">
          <h2>Ingredienti</h2>
          <p>
            Sciroppo di glucosio-fruttosio 
            <span class="ingredienti-secondari">
              (da mais non OGM)
            </span>, 
            acqua purificata, aromi naturali <span class="ingredienti-secondari">(varia in base al gusto)</span>,
            acidificante: acido citrico, conservante: sorbato di potassio,
            colorante naturale <span class="ingredienti-secondari">(in base al gusto: es. antociani, clorofilla, beta-carotene)</span>,
            <span class="gold-d9">distillato D9</span>.<br>
            <strong>Contiene:</strong> THC derivato da cannabis legale in California.<br>
            <strong>Allergeni:</strong> Nessuno dichiarato.
          </p>
        </div>
        <section class="dose-section">
          <h2>Calcola la tua dose ideale</h2>
          <form id="dose-calc-form-classico" class="dose-calc-advanced" onsubmit="return false;">
            <label for="dose-weight">Peso (kg):</label>
            <input type="number" id="dose-weight" name="weight" min="35" max="180" required>

            <label for="dose-sex">Sesso:</label>
            <select id="dose-sex" name="sex" required>
              <option value="m">Maschio</option>
              <option value="f">Femmina</option>
              <option value="x">Altro</option>
            </select>

            <label for="dose-tolerance">Consumo THC:</label>
            <select id="dose-tolerance" name="tolerance" required>
              <option value="none">Mai provato</option>
              <option value="low">Saltuario</option>
              <option value="med">Regolare</option>
              <option value="high">Alta tolleranza</option>
            </select>

            <label for="dose-purpose">Scopo dell'assunzione:</label>
            <select id="dose-purpose" name="purpose" required>
              <option value="relax">Relax leggero</option>
              <option value="euphoria">Euforia & Creativit√†</option>
              <option value="strong">Esperienza Intensa</option>
            </select>

            <button type="button" class="cta" onclick="toggleAdvanced()">Modalit√† avanzata</button>
            <button type="button" class="cta" id="super-adv-toggle" style="margin-top: 12px; display: none;" onclick="toggleSuperAdvanced()">Versione super avanzata</button>

            <div id="dose-advanced" style="display: none;">
              <label for="dose-age">Et√†:</label>
              <select id="dose-age" name="age">
                <option value="18">18‚Äì25</option>
                <option value="26">26‚Äì35</option>
                <option value="36">36‚Äì50</option>
                <option value="51">51+</option>
              </select>

              <label for="dose-medical">Uso:</label>
              <select id="dose-medical" name="use">
                <option value="recreational">Ricreativo</option>
                <option value="medical">Medico</option>
              </select>

              <label for="dose-stress">Ansia o stress:</label>
              <select id="dose-stress" name="stress">
                <option value="no">No</option>
                <option value="mild">Leggero</option>
                <option value="yes">Forte</option>
              </select>

              <label for="dose-sleep">Problemi di sonno:</label>
              <select id="dose-sleep" name="sleep">
                <option value="no">No</option>
                <option value="yes">S√¨</option>
              </select>

              <label for="dose-metabolism">Metabolismo:</label>
              <select id="dose-metabolism" name="metabolism">
                <option value="slow">Lento</option>
                <option value="normal">Normale</option>
                <option value="fast">Veloce</option>
              </select>

              <label for="dose-lastuse">Ultimo uso THC:</label>
              <input type="date" id="dose-lastuse" name="lastuse" max="9999-12-31">
            </div>

            <button type="submit" class="cta">Calcola dose</button>
          </form>
  function toggleAdvanced() {
    const adv = document.getElementById("dose-advanced");
    if (adv.style.display === "none") {
      adv.style.display = "block";
    } else {
      adv.style.display = "none";
    }
  }
          <div class="slider-effetti">
            <label for="dose-slider">Simula una dose:</label>
            <input type="range" id="dose-slider" min="50" max="1000" step="50" value="50" oninput="aggiornaEffettiDose(this.value)">
            <span id="slider-dose-label">50mg</span>
            <div id="slider-effetti-descrizione">Effetto lieve, adatto a principianti.</div>
          </div>
          <div id="dose-calc-result-classico" class="dose-calc-result fadein"></div>
          <div class="dose-disclaimer">
            <p style="margin-top: 12px; font-size: 0.96em; color: #bbb; line-height: 1.45;">
              ‚ö†Ô∏è Effetti collaterali comuni possono includere: bocca secca, sonnolenza, alterazione della percezione del tempo, aumento dell‚Äôappetito, ansia o paranoia (a dosi elevate), vomito.
              <br><br>
              ‚ö†Ô∏è La responsabilit√† sull‚Äôuso √® personale: <strong>ChocoBloom non si assume responsabilit√† su effetti indesiderati derivanti da uso improprio</strong>.<br>
              La dose raccomandata per principianti √® sempre ‚â§ 20mg THC (1g di cioccolatino).
            </p>
          </div>
          <div class="dose-calc-safety">
            <small>
              Attenzione: i risultati sono solo indicativi. Inizia sempre con la dose minima possibile. Gli effetti possono durare anche 8 ore.<br>
              <b>Mai guidare o svolgere attivit√† a rischio dopo l‚Äôassunzione.</b>
            </small>
          </div>
          <div class="dose-divider"><span>oppure</span></div>
          <div class="dose-ai-agent">
            <h3>Preferisci? Chiedi a BloomBot ü§ñ</h3>
            <form id="ai-agent-form">
              <label title="Hai gi√† assunto THC in passato?">Hai mai provato THC?</label>
              <select name="ai-tried">
                <option value="no">Mai</option>
                <option value="occasionally">Ogni tanto</option>
                <option value="often">Regolarmente</option>
                <option value="daily">Ogni giorno</option>
              </select>

              <label title="Hai l‚Äôabitudine di fumare cannabis?">Fumi cannabis?</label>
              <select name="ai-smoke">
                <option value="no">Mai</option>
                <option value="weekend">Ogni tanto</option>
                <option value="daily">Tutti i giorni</option>
              </select>

              <label title="Quanto vuoi sentire l‚Äôeffetto?">Quanto vuoi sentirlo?</label>
              <select name="ai-intensity">
                <option value="light">Appena un po‚Äô</option>
                <option value="balanced">Un effetto pieno</option>
                <option value="strong">Voglio volare</option>
              </select>

              <label title="Quanti anni hai?">Et√†</label>
              <select name="ai-age">
                <option value="18">18-20</option>
                <option value="21">21-29</option>
                <option value="30">30-39</option>
                <option value="40">40-59</option>
                <option value="60">60+</option>
              </select>

            <button type="button" class="cta" id="coming-soon-btn">COMING SOON</button>
            <div id="cannabis-leaf-animation"></div>
            <div id="ai-agent-result" class="dose-calc-result fadein"></div>
            </form>
            <div id="ai-agent-result" class="dose-calc-result fadein"></div>
          </div>
        </section>
      </div>
    </section>
  </main>
  <footer class="footer" id="footer">
    <div>
      <a href="https://t.me/ChocoBloomEdibles_Order" target="_blank">Telegram</a>
      <span>¬∑</span>
      <a href="https://instagram.com/chocobloomedibles" target="_blank">Instagram</a>
    </div>
    <div class="footer-copy">
      ¬© 2025 ChocoBloom. Prodotto in California ‚Äì Ideato in Italia.
    </div>
  </footer>
  <script>
    // Slider effetti
    function aggiornaEffettiDose(val) {
      document.getElementById('slider-dose-label').textContent = val + "mg";
      let desc = "";
      val = parseInt(val);
      const slider = document.getElementById('dose-slider');
      slider.style.setProperty('--glow', val >= 400 ? '#ff00cc' : val >= 200 ? '#ff99cc' : '#aaa');
      if(val <= 50) desc = "Effetto lieve, adatto a principianti.";
      else if(val <= 150) desc = "Effetto moderato, piacevole per la maggior parte degli utenti.";
      else if(val <= 400) desc = "Effetto intenso, solo per utenti esperti.";
      else if(val <= 700) desc = "Dose elevata: effetto molto forte, attenzione!";
      else desc = "Dose massiva: solo per tolleranza altissima. Rischio effetti collaterali!";
      document.getElementById('slider-effetti-descrizione').textContent = desc;
    }

    // Hamburger menu con animazione "X" e gestione SOLO tramite classi
    function toggleMenu() {
      const menu = document.getElementById('sideMenu');
      const burger = document.querySelector('.hamburger');
      menu.classList.toggle('show');
      burger.classList.toggle('open');
    }
    // Chiudi il menu se clicchi fuori (opzionale)
    document.addEventListener("click", function (event) {
      const menu = document.getElementById("sideMenu");
      const burger = document.querySelector(".hamburger");
      const isClickInsideMenu = menu && menu.contains(event.target);
      const isClickOnBurger = burger && burger.contains(event.target);

      if (!isClickInsideMenu && !isClickOnBurger) {
        menu.classList.remove("show");
        burger.classList.remove("open");
      }
    });
  </script>
  <script>
  // Nuovo calcolo dose avanzato con 10 input e gestione slider/result
  (function() {
    const form = document.getElementById('dose-calc-form-classico');
    const resultEl = document.getElementById('dose-calc-result-classico');
    const slider = document.getElementById('dose-slider');
    const sliderLabel = document.getElementById('slider-dose-label');
    const sliderDesc = document.getElementById('slider-effetti-descrizione');
    if (!(form && resultEl && slider && sliderLabel && sliderDesc)) return;

    function calcolaDoseAvanzata(values) {
      let dose = values.weight ? parseFloat(values.weight) * 0.6 : 30;

      if (values.sex === 'f') dose *= 0.85;
      else if (values.sex === 'x') dose *= 0.93;

      switch (values.tolerance) {
        case 'none': dose *= 0.4; break;
        case 'low': dose *= 0.7; break;
        case 'med': dose *= 1.0; break;
        case 'high': dose *= 2.5; break;
      }

      switch (values.purpose) {
        case 'relax': dose *= 1.0; break;
        case 'euphoria': dose *= 1.3; break;
        case 'strong': dose *= 1.7; break;
      }

      if (values.age) {
        const age = parseInt(values.age);
        if (age <= 25) dose *= 1.1;
        else if (age >= 51) dose *= 0.85;
      }

      if (values.use === 'medical') dose *= 1.4;

      if (values.stress === 'yes') dose *= 1.25;
      else if (values.stress === 'mild') dose *= 1.1;

      if (values.sleep === 'yes') dose *= 1.15;

      if (values.metabolism === 'slow') dose *= 0.9;
      else if (values.metabolism === 'fast') dose *= 1.2;

      if (values.lastuse !== undefined && values.lastuse !== null && values.lastuse !== '') {
        const today = new Date();
        const lastDate = new Date(values.lastuse);
        if (!isNaN(lastDate.getTime())) {
          const diffDays = Math.floor((today - lastDate) / (1000 * 60 * 60 * 24));
          if (diffDays < 2) dose *= 1.3;
          else if (diffDays < 8) dose *= 1.15;
        }
      }

      dose = Math.round(dose);
      if (dose < 5) dose = 5;
      if (dose > 1000) dose = 1000;
      return dose;
    }

    function effettoBadge(dose) {
      if (dose <= 50) return {level:'Effetto lieve, adatto a principianti.', badge:'badge-lieve'};
      if (dose <= 150) return {level:'Effetto moderato, piacevole per la maggior parte degli utenti.', badge:'badge-moderato'};
      if (dose <= 400) return {level:'Effetto intenso, solo per utenti esperti.', badge:'badge-intenso'};
      if (dose <= 700) return {level:'Dose elevata: effetto molto forte, attenzione!', badge:'badge-alta'};
      return {level:'Dose massiva: solo per tolleranza altissima. Rischio effetti collaterali!', badge:'badge-estrema glow'};
    }

    function produceResultHTML(dose, isSciroppo) {
      const unitMg = isSciroppo ? 6.6 : 200;
      const unitLabel = isSciroppo ? 'sciroppo' : 'cioccolatino';
      const unitG = isSciroppo ? 1 : 10;
      const quantita = dose / unitMg;
      const pesoInG = quantita * unitG;
      const eff = effettoBadge(dose);
      return `<div class="dose-result-box ${eff.badge}">
        <span class="dose-warning-icon" role="img" aria-label="Attenzione">‚ö†Ô∏è</span>
        <b>Dose consigliata:</b> ${dose}mg THC<br>
        ‚âà ${quantita.toFixed(2)} ${unitLabel}${quantita >= 1.5 ? 's' : ''} (~${pesoInG.toFixed(1)}g)<br>
        <span>${eff.level}</span>
      </div>`;
    }

    form.addEventListener('submit', function(e) {
      e.preventDefault();
      const vals = {
        weight: this.weight.value,
        sex: this.sex.value,
        tolerance: this.tolerance.value,
        purpose: this.purpose.value,
        age: this.age ? this.age.value : undefined,
        use: this.use ? this.use.value : undefined,
        stress: this.stress ? this.stress.value : undefined,
        sleep: this.sleep ? this.sleep.value : undefined,
        metabolism: this.metabolism ? this.metabolism.value : undefined,
        lastuse: this.lastuse ? this.lastuse.value : undefined
      };
      const isSciroppo = window.location.pathname.includes('sciroppo');
      const dose = calcolaDoseAvanzata(vals);
      const resultHTML = produceResultHTML(dose, isSciroppo);
      resultEl.innerHTML = resultHTML;
      document.getElementById('dose-calc-result-classico').innerHTML = resultHTML;
      // Aggiorna slider visual
      slider.value = dose;
      sliderLabel.textContent = `${dose}mg`;
      const eff = effettoBadge(dose);
      sliderDesc.textContent = eff.level;
      // Clona risultato sotto slider
      let sliderResultClone = document.getElementById("dose-calc-clone");
      if (sliderResultClone) sliderResultClone.remove();
      let temp = document.createElement('div');
      temp.innerHTML = resultHTML;
      sliderResultClone = temp.firstElementChild;
      sliderResultClone.id = "dose-calc-clone";
      sliderResultClone.style.marginTop = "12px";
      slider.parentElement.appendChild(sliderResultClone);
    });

    // Aggiorna slider effetti e clona risultato
    window.aggiornaEffettiDose = function(val) {
      sliderLabel.textContent = val + "mg";
      val = parseInt(val);
      let eff = effettoBadge(val);
      sliderDesc.textContent = eff.level;
      // Mostra anche il box con badge
      const isSciroppo = window.location.pathname.includes('sciroppo');
      let html = produceResultHTML(val, isSciroppo);
      // Aggiorna il blocco sotto il form
      document.getElementById('dose-calc-result-classico').innerHTML = html;
      // Gestisci il clone sotto lo slider
      let sliderResultClone = document.getElementById("dose-calc-clone");
      if (sliderResultClone) sliderResultClone.remove();
      let temp = document.createElement('div');
      temp.innerHTML = html;
      sliderResultClone = temp.firstElementChild;
      sliderResultClone.id = "dose-calc-clone";
      sliderResultClone.style.marginTop = "12px";
      slider.parentElement.appendChild(sliderResultClone);
    }
  })();

    function toggleSuperAdvanced() {
    alert("La versione super avanzata richieder√† valori reali da esami del sangue. Funzionalit√† in sviluppo.");
  }

  document.addEventListener("DOMContentLoaded", function () {
    const advBtn = document.querySelector('button[onclick="toggleAdvanced()"]');
    const superBtn = document.getElementById('super-adv-toggle');
    if (advBtn && superBtn) {
      advBtn.addEventListener("click", () => {
        setTimeout(() => {
          const adv = document.getElementById("dose-advanced");
          if (adv && adv.style.display === "block") {
            superBtn.style.display = "block";
          } else {
            superBtn.style.display = "none";
          }
        }, 100);
      });
    }
  });
  </script>
  <style>
.dose-result-box {
  margin-top: 16px;
  padding: 12px;
  border-radius: 12px;
  font-size: 1.1em;
  text-align: center;
  font-weight: 500;
  margin-bottom: 0 !important;
}
.badge-lieve { background: #220033; color: #ccc; border: 1px solid #8844aa; }
.badge-moderato { background: #331144; color: #fff; border: 1px solid #bb66cc; }
.badge-intenso { background: #552266; color: #fff; border: 1px solid #dd88ee; }
.badge-alta { background: #7a0055; color: #fff; border: 1px solid #ff00cc; }
.badge-estrema {
  background: #990033;
  color: #fff;
  border: 2px solid #ff3399;
  animation: pulseGlow 1.4s infinite ease-in-out;
}
.glow {
  box-shadow: 0 0 12px #ff3399, 0 0 24px #ff66cc;
}
@keyframes pulseGlow {
  0% { box-shadow: 0 0 12px #ff00cc66; }
  50% { box-shadow: 0 0 38px #ff33ccaa; }
  100% { box-shadow: 0 0 12px #ff00cc66; }
}
</style>
</body>
</html>